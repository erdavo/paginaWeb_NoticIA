<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NoticIA - Analizar Noticia</title>

  <!-- Tailwind + fuentes -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

  <style>
    .material-symbols-outlined {
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }

    /* üåô Hover sutil en los contenedores */
    .tab-content:hover {
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.12);
    }

    .dark .tab-content:hover {
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.08);
    }

    /* ‚úÖ Estilo de bot√≥n activo */
    .tab-btn.active {
      background-color: rgba(76, 174, 79, 0.15);
      color: #4cae4f;
      border-color: #4cae4f;
      font-weight: 600;
      box-shadow: 0 0 0 2px rgba(76, 174, 79, 0.2);
    }

    /* üéûÔ∏è Transiciones suaves para el contenido */
    .tab-content {
      opacity: 0;
      transform: translateY(10px);
      display: none;
      transition: opacity 0.25s ease, transform 0.25s ease;
    }

    .tab-content.active {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    /* ‚ùå Eliminar subrayado de los enlaces del header */
    header nav a {
      text-decoration: none;
    }

    /* ‚úÖ Indicador activo en navegaci√≥n del header */
    header nav a.nav-active {
      position: relative;
    }

    header nav a.nav-active::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 0;
      right: 0;
      height: 2px;
      background-color: #4cae4f;
      border-radius: 2px;
    }
  </style>

  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#4cae4f",
            "background-light": "#f6f7f6",
            "background-dark": "#151d15",
            "surface-light": "#f1f3f1",
            "surface-dark": "#202a20",
            "text-light": "#131613",
            "text-dark": "#e1e3e1",
            "subtle-text-light": "#6c7f6d",
            "subtle-text-dark": "#9ca79c",
          },
          fontFamily: {
            display: ["Inter", "sans-serif"],
          },
          borderRadius: {
            DEFAULT: "0.5rem",
            lg: "0.75rem",
            xl: "1rem",
            full: "9999px",
          },
        },
      },
    };
  </script>
</head>

<body
  class="font-display bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark min-h-screen flex flex-col">

  <!-- HEADER -->
  <header
    class="flex items-center justify-between px-8 py-4 border-b border-subtle-text-light/20 dark:border-subtle-text-dark/20">
    <div class="flex items-center gap-3">
      <a href="analizar.html"
        class="flex items-center justify-center w-10 h-10 rounded-full bg-primary/10 hover:bg-primary/20 transition shadow-sm hover:shadow-md active:scale-95">
        <img src="img/logo.png" alt="Logo NoticIA" class="h-6 w-6 object-contain" />
      </a>
      <a href="analizar.html"
        class="text-xl font-bold text-text-light dark:text-text-dark hover:text-primary transition no-underline">
        NoticIA
      </a>
    </div>

    <nav class="flex gap-8 text-base font-medium">
      <a href="analizar.html" class="text-primary font-bold nav-active no-underline">Analizar</a>
      <a href="foro.html" class="hover:text-primary transition no-underline">Foro</a>
      <a href="resumir.html" class="hover:text-primary transition no-underline">Resumir</a>
      <a href="ia.html" class="hover:text-primary transition no-underline">Hablar con la IA</a>
    </nav>

    <div id="profile-menu-root"></div>
  </header>

  <!-- MAIN -->
  <main class="flex flex-col items-center justify-start flex-1 px-4 py-10">
    <h1 class="text-3xl font-bold mb-8">Analizar Noticia</h1>

    <!-- ‚úÖ Pesta√±as UX/UI limpias -->
    <div id="tabs" class="flex flex-wrap gap-4 mb-8 text-lg font-semibold justify-center">
      <!-- üü¢ TEXTO -->
      <button data-tab="texto"
        class="tab-btn flex items-center gap-2 px-5 py-3 rounded-full border border-transparent transition-all duration-200 hover:bg-primary/20 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-primary active:scale-95">
        <span class="material-symbols-outlined text-xl">edit_note</span>
        <span>Texto</span>
      </button>

      <!-- üîµ DOCUMENTO -->
      <button data-tab="documento"
        class="tab-btn flex items-center gap-2 px-5 py-3 rounded-full border border-transparent transition-all duration-200 hover:bg-primary/20 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-primary active:scale-95">
        <span class="material-symbols-outlined text-xl">upload_file</span>
        <span>Documento</span>
      </button>

      <!-- üî¥ ENLACE -->
      <button data-tab="enlace"
        class="tab-btn flex items-center gap-2 px-5 py-3 rounded-full border border-transparent transition-all duration-200 hover:bg-primary/20 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-primary active:scale-95">
        <span class="material-symbols-outlined text-xl">link</span>
        <span>Enlace</span>
      </button>
    </div>

    <!-- Contenido din√°mico -->
    <div id="tab-content" class="w-full max-w-2xl">

      <!-- üü¢ TEXTO -->
      <div id="contenido-texto" class="tab-content">
        <div
          class="bg-surface-light dark:bg-surface-dark rounded-xl p-6 shadow-md border border-text-light/50 dark:border-text-dark/50 hover:border-text-light dark:hover:border-text-dark transition-all duration-300">
          <div class="flex items-center gap-2 mb-3">
            <span class="material-symbols-outlined text-text-light dark:text-text-dark">edit_note</span>
            <label for="texto" class="text-lg font-semibold tracking-tight">Introduce el texto de la noticia:</label>
          </div>
          <textarea id="texto" rows="8" placeholder="Escribe o pega aqu√≠ el texto que deseas analizar..."
            class="w-full resize-none rounded-lg border border-text-light/40 dark:border-text-dark/40 bg-background-light dark:bg-background-dark p-4 text-base text-text-light dark:text-text-dark placeholder:text-subtle-text-light dark:placeholder:text-subtle-text-dark focus:ring-2 focus:ring-text-light dark:focus:ring-text-dark outline-none focus:bg-surface-light/70 dark:focus:bg-surface-dark/70 transition-all duration-200 shadow-inner"></textarea>
        </div>
      </div>

      <!-- üîµ DOCUMENTO -->
      <div id="contenido-documento" class="tab-content">
        <div
          class="bg-surface-light dark:bg-surface-dark rounded-xl p-6 shadow-md border border-text-light/50 dark:border-text-dark/50 hover:border-text-light dark:hover:border-text-dark transition-all duration-300">
          <div class="flex items-center gap-2 mb-4">
            <span class="material-symbols-outlined text-text-light dark:text-text-dark">upload_file</span>
            <h3 class="text-lg font-semibold tracking-tight">Subir documento:</h3>
          </div>

          <div id="dropzone"
            class="relative flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-text-light/40 dark:border-text-dark/40 rounded-xl hover:border-text-light dark:hover:border-text-dark transition-all cursor-pointer bg-background-light dark:bg-surface-dark/60 hover:bg-text-light/5 group">
            <span
              class="material-symbols-outlined text-5xl text-text-light dark:text-text-dark mb-2 transition-transform group-hover:scale-110">
              upload_file
            </span>
            <p class="text-subtle-text-light dark:text-subtle-text-dark text-sm">Arrastra y suelta un archivo aqu√≠ o haz
              clic para seleccionarlo</p>
            <input type="file" id="fileInput" class="hidden" />
          </div>

          <div id="uploaded-files" class="mt-6 flex flex-col gap-3 text-left"></div>

          <p class="mt-4 text-sm text-subtle-text-light dark:text-subtle-text-dark italic text-center">
            Formatos admitidos: PDF, DOCX, TXT, CSV, im√°genes, etc.
          </p>
        </div>
      </div>

      <!-- üî¥ ENLACE -->
      <div id="contenido-enlace" class="tab-content">
        <div
          class="bg-surface-light dark:bg-surface-dark rounded-xl p-6 shadow-md border border-text-light/50 dark:border-text-dark/50 hover:border-text-light dark:hover:border-text-dark transition-all duration-300">
          <div class="flex items-center gap-2 mb-3">
            <span class="material-symbols-outlined text-text-light dark:text-text-dark">link</span>
            <label for="enlace" class="text-lg font-semibold tracking-tight">Introduce el enlace de la noticia:</label>
          </div>

          <div class="relative">
            <input id="enlace" type="url" placeholder="https://ejemplo.com/articulo"
              class="w-full rounded-lg border border-text-light/40 dark:border-text-dark/40 bg-background-light dark:bg-background-dark p-4 text-base text-text-light dark:text-text-dark placeholder:text-subtle-text-light dark:placeholder:text-subtle-text-dark focus:ring-2 focus:ring-text-light dark:focus:ring-text-dark outline-none focus:bg-surface-light/70 dark:focus:bg-surface-dark/70 transition-all duration-200 shadow-inner" />
            <span
              class="material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 text-subtle-text-light dark:text-subtle-text-dark pointer-events-none">language</span>
          </div>

          <p class="mt-3 text-sm text-subtle-text-light dark:text-subtle-text-dark italic">
            Pega aqu√≠ el enlace completo de la noticia que deseas analizar.
          </p>
        </div>
      </div>
    </div>

    <!-- Bot√≥n principal -->
    <button id="analizarBtn"
      class="mt-8 flex items-center justify-center w-40 h-14 bg-primary text-white rounded-full text-base font-bold tracking-wide hover:opacity-90 active:scale-95 transition-transform">
      Analizar
    </button>
    <!-- RESULTADO + BLOQUE REPORTE (igual que antes) -->
    <!-- No modifico para mantener compatibilidad con tu JS actual -->
    <section id="resultado-analisis"
      class="hidden flex flex-col items-center mt-16 opacity-0 transition-opacity duration-700">
      <h2 id="titulo-analisis" class="text-3xl font-bold mb-4">Analizando noticia...</h2>
      <p id="porcentaje-grande" class="text-5xl font-extrabold text-primary mb-2">0%</p>
      <div class="w-80 h-8 bg-surface-dark/20 dark:bg-background-dark rounded-full overflow-hidden mb-3 shadow-inner">
        <div id="barra-confianza" class="h-full bg-primary w-0 transition-all duration-1000"></div>
      </div>
      <p id="porcentaje-confianza"
        class="text-base font-medium text-subtle-text-light dark:text-subtle-text-dark mb-10">Analizando...</p>

      <div
        class="w-full max-w-2xl bg-surface-light dark:bg-surface-dark rounded-xl p-6 border border-subtle-text-light/30 dark:border-subtle-text-dark/30 shadow-md mb-6">
        <h3 class="text-lg font-semibold mb-3">Resultados del an√°lisis:</h3>
        <p id="texto-analisis" class="text-base text-text-light dark:text-text-dark leading-relaxed">
          Procesando la informaci√≥n...
        </p>
      </div>

      <div class="flex flex-col items-center gap-3">
        <a href="ia.html"
          class="w-64 h-14 rounded-full border border-primary text-primary font-bold flex items-center justify-center hover:bg-primary hover:text-white transition-all duration-200">
          Preguntar a NoticIA ‚Üó
        </a>

        <button id="reportarErrorBtn"
          class="text-sm text-subtle-text-light dark:text-subtle-text-dark hover:text-red-500 transition">
          ‚ö†Ô∏è Reportar error en el an√°lisis
        </button>
      </div>
    </section>

    <section id="bloque-reporte" class="hidden flex flex-col items-center mt-16 opacity-0 transition-all duration-700">
      <h2 class="text-2xl font-bold mb-2">¬øDetectas un error en este an√°lisis?</h2>
      <p class="text-sm text-subtle-text-light dark:text-subtle-text-dark mb-6 text-center max-w-lg">
        Cu√©ntanos qu√© no te ha parecido correcto. Tu opini√≥n nos ayuda a mejorar NoticIA.
      </p>
      <form id="formReporte"
        class="w-full max-w-2xl bg-surface-light dark:bg-surface-dark rounded-xl shadow-md p-8 border border-subtle-text-light/20 dark:border-subtle-text-dark/20 flex flex-col gap-4">
        <div class="flex flex-col">
          <label for="emailReporte" class="text-base font-medium mb-2">üìß Tu correo electr√≥nico
            (opcional):</label>
          <input id="emailReporte" type="email" placeholder="Introduce tu email si quieres que te contactemos"
            class="w-full rounded-lg border-none bg-background-light dark:bg-background-dark p-4 text-base text-text-light dark:text-text-dark placeholder:text-subtle-text-light dark:placeholder:text-subtle-text-dark focus:ring-2 focus:ring-primary outline-none" />
        </div>
        <div class="flex flex-col">
          <label for="mensajeReporte" class="text-base font-medium mb-2">üìù Describe brevemente el
            error:</label>
          <textarea id="mensajeReporte" rows="4"
            placeholder="Ejemplo: el an√°lisis indic√≥ que era confiable, pero las fuentes no son reales..."
            class="w-full rounded-lg border-none bg-background-light dark:bg-background-dark p-4 text-base text-text-light dark:text-text-dark placeholder:text-subtle-text-light dark:placeholder:text-subtle-text-dark focus:ring-2 focus:ring-primary outline-none resize-none"
            required></textarea>
        </div>
        <div class="flex justify-center pt-2">
          <button type="submit"
            class="w-48 h-12 rounded-full bg-primary text-white font-bold text-base hover:opacity-90 active:scale-95 transition-transform">
            Enviar reporte
          </button>
        </div>
      </form>
    </section>

  </main>

  <script src="js/script.js" defer></script>
  <script src="js/profile-menu.js"></script>

  <!-- JS de pesta√±as -->
  <script>
    const tabs = document.querySelectorAll(".tab-btn");
    const contents = document.querySelectorAll(".tab-content");

    // Funci√≥n para activar una pesta√±a
    function activateTab(targetBtn) {
      // Desactivar todas las pesta√±as
      tabs.forEach(btn => {
        btn.classList.remove("active", "bg-primary/10", "text-primary");
        btn.classList.add("bg-surface-light", "dark:bg-surface-dark", "text-text-light", "dark:text-text-dark");
      });

      // Ocultar todo el contenido
      contents.forEach(content => {
        content.classList.remove("active");
      });

      // Activar la pesta√±a seleccionada
      targetBtn.classList.add("active", "bg-primary/10", "text-primary");
      targetBtn.classList.remove("bg-surface-light", "dark:bg-surface-dark", "text-text-light", "dark:text-text-dark");

      // Mostrar el contenido correspondiente
      const targetContent = document.getElementById(`contenido-${targetBtn.dataset.tab}`);
      targetContent.classList.add("active");
    }

    // Agregar event listeners a todos los botones
    tabs.forEach(btn => {
      btn.addEventListener("click", () => activateTab(btn));
    });

    // Activar la primera pesta√±a por defecto
    if (tabs.length > 0) {
      activateTab(tabs[0]);
    }
  </script>
</body>

</html>